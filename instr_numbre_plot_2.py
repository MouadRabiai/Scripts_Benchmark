import matplotlib.pyplot as plt
import numpy as np

# Benchmark names
benchmarks = [
    "aha-mont64", "crc32", "cubic", "edn", "huffbench", 
    "matmult-int", "md5sum", "minver", "nbody", "nettle-aes",
    "nettle-sha256", "nsichneu", "picojpeg", "primecount", 
    "qrduino", "sglib-combined", "slre", "st", "statemate", 
    "tarfind", "ud", "wikisort"
]

# Instruction numbers for each configuration (data directly copied from your tables)
configs = {
    'WAESP32AU1V010FIFNoNlpNoHpmMulReg': [4531262, 3831160, 6033867, 3999197, 2598466, 3183123, 2046781, 4964001, 3478553, 4463292, 4030435, 2236759, 4171077, 2148523, 3169184, 2628017, 2590543, 3936305, 1317876, 1037257, 3358071, 1265262],
    'WAESP32AU1V010FIFNoNlpNoHpmMulRegDiv2': [4531262, 3831160, 6033867, 3999197, 2598466, 3183123, 2046781, 4964001, 3478553, 4463292, 4030435, 2236759, 4171077, 2148523, 3169184, 2628017, 2590543, 3936305, 1317876, 1037257, 3358071, 1265262],
    'WAESP32AU1V010FIFNoNlpNoHpmMulRegDivDmemWreg': [4531262, 3831160, 6033867, 3999197, 2598466, 3183123, 2046781, 4964001, 3478553, 4463292, 4030435, 2236759, 4171077, 2148523, 3169184, 2628017, 2590543, 3936305, 1317876, 1037257, 3358071, 1265262],
    'WAESP32AU1V010FIFNoNlpNoHpmMulRegDivDmemReg': [4531262, 3831160, 6033867, 3919244, 2587466, 3183123, 2046781, 4964001, 3478553, 4427412, 4015235, 2236759, 4130631, 2148523, 3106269, 2622217, 2590543, 3936305, 1251100, 1037257, 3358071, 1266815],
    'WAESP32AU1V010NoNlp': [4531262, 3831161, 6637287, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3936305, 1278596, 1037258, 3358071, 1266807],
    'WAESP32AU1V010NoHpm': [4531262, 3831161, 6637287, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3936305, 1278596, 1037258, 3358071, 1266807],
    'WAESP32AU1V010NoNlp2': [4531262, 3831161, 7001707, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3931417, 1278596, 1037258, 3358071, 1266875],
    'WAESP32AU1V010NoHpm2': [4531262, 3831161, 7001707, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3931417, 1278596, 1037258, 3358071, 1266875],
    'WAESP32AU1V010NoHpm2Btb16': [4531262, 3831161, 7001707, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3931417, 1278596, 1037258, 3358071, 1266875],
    'WAESP32AU1V010NoHpm2Btb8': [4531262, 3831161, 7001707, 3919331, 2598467, 3183124, 2046782, 4964001, 3478653, 4427412, 4015235, 2236759, 4134861, 2148524, 3168775, 2622218, 2590543, 3931417, 1278596, 1037258, 3358071, 1266875],
    'WAESP32AU1V010NoHpm2Btb16IFReg': [4531262, 3831161, 5804239, 4026254, 2598466, 3183123, 2046781, 4964001, 3484767, 4462473, 4030435, 2236759, 4196163, 2148523, 3174005, 2624376, 2590543, 3931417, 1318856, 1037257, 3358071, 1267935],
    'WAESP32AU1V010NoHpm2Btb8IFReg': [4531262, 3831160, 5803827, 4026254, 2598466, 3183123, 2046781, 4964001, 3484767, 4462512, 4030435, 2236759, 4192128, 2148523, 3173969, 2629387, 2590543, 3931417, 1317876, 1037257, 3358071, 1267935]
}

# Plot setup
fig, ax = plt.subplots(figsize=(20, 10))
index = np.arange(len(benchmarks))
bar_width = 0.05  # Adjusted for multiple configurations

# Generating the bars for each configuration
colors = plt.cm.viridis(np.linspace(0, 1, len(configs)))  # Color map for better distinction
for i, (label, instr) in enumerate(configs.items()):
    ax.bar(index + i * bar_width, instr, bar_width, label=label)

# Graph styling
ax.set_xlabel('Benchmarks')
ax.set_ylabel('Instruction Count')
ax.set_title('Instruction Count per Benchmark and Configuration')
ax.set_xticks(index + bar_width * (len(configs) / 2) - bar_width / 2)
ax.set_xticklabels(benchmarks, rotation=45)
ax.legend()

# Layout adjustment
plt.tight_layout()
plt.show()
